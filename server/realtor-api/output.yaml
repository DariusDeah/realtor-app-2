AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: 'realtor-api-2

  Sample SAM Template for realtor-api-2

  '
Globals:
  Function:
    Timeout: 3
Resources:
  LoginFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://realtor-api-prod/bf42298a30ecbfcd87eddaf90c1a4cd4
      Handler: login.lambdaHandler
      Runtime: nodejs14.x
      Architectures:
      - x86_64
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: api/v2/login
            Method: post
      Environment:
        Variables:
          NODE_OPTIONS: ' --enable-source-maps'
    Metadata:
      BuildMethod: esbuild
      BuildProperties:
        EntryPoints:
        - login.ts
        Minify: true
        Sourcemap: true
        Target: es2020
      SamResourceId: LoginFunction
  SignupFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://realtor-api-prod/c2012b17241cdc60c6d7ee73f27bf6e0
      Handler: signup.lambdaHandler
      Runtime: nodejs14.x
      Architectures:
      - x86_64
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: api/v2/signup
            Method: post
      Environment:
        Variables:
          NODE_OPTIONS: ' --enable-source-maps'
    Metadata:
      BuildMethod: esbuild
      BuildProperties:
        EntryPoints:
        - signup.ts
        Minify: true
        Sourcemap: true
        Target: es2020
      SamResourceId: SignupFunction
  UserTable:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: UserTable
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      KeySchema:
      - AttributeName: id
        KeyType: HASH
    Metadata:
      SamResourceId: UserTable
  CacheStore:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: CacheStore
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
      - AttributeName: id
        AttributeType: S
      KeySchema:
      - AttributeName: id
        KeyType: HASH
    Metadata:
      SamResourceId: CacheStore
  HomeTableV2:
    Type: AWS::DynamoDB::Table
    Properties:
      TableName: HomeTableV3
      BillingMode: PAY_PER_REQUEST
      AttributeDefinitions:
      - AttributeName: creator_id
        AttributeType: S
      - AttributeName: zpid
        AttributeType: S
      KeySchema:
      - AttributeName: creator_id
        KeyType: HASH
      - AttributeName: zpid
        KeyType: RANGE
    Metadata:
      SamResourceId: HomeTableV2
  UnsplashFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://realtor-api-prod/05c8ddabef7576b1327b8f251d6eadc0
      Handler: unsplash-proxy.lambdaHandler
      Runtime: nodejs14.x
      Architectures:
      - x86_64
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: api/v2/unsplash-proxy
            Method: get
      Environment:
        Variables:
          NODE_OPTIONS: ' --enable-source-maps'
    Metadata:
      BuildMethod: esbuild
      BuildProperties:
        EntryPoints:
        - unsplash-proxy.ts
        Minify: true
        Sourcemap: true
        Target: es2020
      SamResourceId: UnsplashFunction
  AddFavoritesFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://realtor-api-prod/22eac9dd75a74d27c8d02708c81d0725
      Handler: addFavoriteHomes.lambdaHandler
      Runtime: nodejs14.x
      Architectures:
      - x86_64
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: api/v2/favorites
            Method: post
      Environment:
        Variables:
          NODE_OPTIONS: ' --enable-source-maps'
    Metadata:
      BuildMethod: esbuild
      BuildProperties:
        EntryPoints:
        - addFavoriteHomes.ts
        Minify: true
        Sourcemap: true
        Target: es2020
      SamResourceId: AddFavoritesFunction
  GetFavoritesFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://realtor-api-prod/527276e373367648886ff53a15165982
      Handler: getFavoriteHomes.lambdaHandler
      Runtime: nodejs14.x
      Architectures:
      - x86_64
      Events:
        HelloWorld:
          Type: Api
          Properties:
            Path: api/v2/favorites
            Method: get
      Environment:
        Variables:
          NODE_OPTIONS: ' --enable-source-maps'
    Metadata:
      BuildMethod: esbuild
      BuildProperties:
        EntryPoints:
        - getFavoriteHomes.ts
        Minify: true
        Sourcemap: true
        Target: es2020
      SamResourceId: GetFavoritesFunction
